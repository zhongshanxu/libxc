/* 
  This file was generated automatically with ./scripts/maple2c.pl.
  Do not edit this file directly as it can be overwritten!!

  This Source Code Form is subject to the terms of the Mozilla Public
  License, v. 2.0. If a copy of the MPL was not distributed with this
  file, You can obtain one at http://mozilla.org/MPL/2.0/.

  Maple version     : Maple 2016 (X86 64 LINUX)
  Maple source      : ./maple/mgga_exc/mgga_x_mvsb.mpl
  Type of functional: mgga_exc
*/

#define maple2c_order 2
#define MAPLE2C_FLAGS (XC_FLAGS_I_HAVE_EXC | XC_FLAGS_I_HAVE_VXC | XC_FLAGS_I_HAVE_FXC)


static inline void
func_unpol(const xc_func_type *p, int order, const double *rho, const double *sigma, const double *lapl, const double *tau , double *zk MGGA_OUT_PARAMS_NO_EXC(XC_COMMA double *, ))
{

#ifndef XC_DONT_COMPILE_EXC
  double t4, t5, t6, t8, t9, t10, t11, t12;
  double t13, t15, t16, t17, t18, t20, t23, t24;
  double t25, t26, t27, t28, t31, t32, t35, t36;
  double t37, t38, t39, t41, t42, t43, t44, t45;
  double t46, t48, t49, t50, t52, t54, t56, t58;
  double t60, t61, t63, t67, t68, t69, t73;

#ifndef XC_DONT_COMPILE_VXC
  double t74, t79, t81, t83, t86, t88, t92, t95;
  double t96, t97, t101, t102, t105, t109, t114, t115;
  double t118, t119, t122, t128, t131, t133, t136, t140;
  double t143, t148, t149, t150, t151, t153, t155, t157;
  double t158, t161, t166, t167, t172, t176, t178, t182;
  double t184, t186, t190, t196, t200, t201, t204, t209;

#ifndef XC_DONT_COMPILE_FXC
  double t227, t233, t237, t238, t240, t250, t252, t253;
  double t257, t259, t263, t265, t266, t272, t280, t284;
  double t291, t292, t311, t316, t318, t321, t322, t323;
  double t325, t326, t333, t344, t350, t351, t368, t376;
  double t380, t421, t431, t432, t437, t449, t462, t500;
  double t506, t510, t512, t513, t554, t556, t572, t583;
  double t602, t605, t606, t615, t619, t627, t651;
#endif

#endif

#endif


  mgga_x_mvsb_params *params;

  assert(p->params != NULL);
  params = (mgga_x_mvsb_params * ) (p->params);

  t4 = rho[0] / 0.2e1 <= 0.101e1 * p->threshold_dens;
  t5 = M_CBRT3;
  t6 = M_CBRTPI;
  t8 = t5 / t6;
  t9 = POW_1_3(rho[0]);
  t10 = M_CBRT2;
  t11 = t10 * t10;
  t12 = tau[0] * t11;
  t13 = t9 * t9;
  t15 = 0.1e1 / t13 / rho[0];
  t16 = t12 * t15;
  t17 = sigma[0] * t11;
  t18 = rho[0] * rho[0];
  t20 = 0.1e1 / t13 / t18;
  t23 = t16 - t17 * t20 / 0.8e1;
  t24 = M_CBRT6;
  t25 = t24 * t24;
  t26 = M_PI * M_PI;
  t27 = POW_1_3(t26);
  t28 = t27 * t27;
  t31 = t16 - 0.3e1 / 0.10e2 * t25 * t28;
  t32 = 0.1e1 / t31;
  t35 = params->k0 * (-t23 * t32 + 0.1e1);
  t36 = t23 * t23;
  t37 = params->e1 * t36;
  t38 = t31 * t31;
  t39 = 0.1e1 / t38;
  t41 = t37 * t39 + 0.1e1;
  t42 = t41 * t41;
  t43 = t36 * t36;
  t44 = params->c1 * t43;
  t45 = t38 * t38;
  t46 = 0.1e1 / t45;
  t48 = t44 * t46 + t42;
  t49 = POW_1_4(t48);
  t50 = 0.1e1 / t49;
  t52 = t35 * t50 + 0.1e1;
  t54 = params->b * t25;
  t56 = 0.1e1 / t27 / t26;
  t58 = sigma[0] * sigma[0];
  t60 = t18 * t18;
  t61 = t60 * rho[0];
  t63 = 0.1e1 / t9 / t61;
  t67 = 0.1e1 + t54 * t56 * t58 * t10 * t63 / 0.288e3;
  t68 = pow(t67, 0.1e1 / 0.8e1);
  t69 = 0.1e1 / t68;
  t73 = my_piecewise3(t4, 0, -0.3e1 / 0.8e1 * t8 * t9 * t52 * t69);
  if(zk != NULL && (p->info->flags & XC_FLAGS_HAVE_EXC))
    zk[0] = 0.2e1 * t73;

#ifndef XC_DONT_COMPILE_VXC

  if(order < 1) return;


  t74 = 0.1e1 / t13;
  t79 = t12 * t20;
  t81 = t18 * rho[0];
  t83 = 0.1e1 / t13 / t81;
  t86 = -0.5e1 / 0.3e1 * t79 + t17 * t83 / 0.3e1;
  t88 = t23 * t39;
  t92 = params->k0 * (-t86 * t32 - 0.5e1 / 0.3e1 * t88 * t79);
  t95 = 0.1e1 / t49 / t48;
  t96 = params->e1 * t23;
  t97 = t39 * t86;
  t101 = 0.1e1 / t38 / t31;
  t102 = t37 * t101;
  t105 = 0.2e1 * t96 * t97 + 0.10e2 / 0.3e1 * t102 * t79;
  t109 = params->c1 * t36 * t23;
  t114 = 0.1e1 / t45 / t31;
  t115 = t44 * t114;
  t118 = 0.2e1 * t41 * t105 + 0.4e1 * t109 * t46 * t86 + 0.20e2 / 0.3e1 * t115 * t79;
  t119 = t95 * t118;
  t122 = t92 * t50 - t35 * t119 / 0.4e1;
  t128 = 0.1e1 / t60 / t18;
  t131 = 0.1e1 / t68 / t67;
  t133 = t8 * t128 * t52 * t131;
  t136 = t54 * t56 * t58 * t10;
  t140 = my_piecewise3(t4, 0, -t8 * t74 * t52 * t69 / 0.8e1 - 0.3e1 / 0.8e1 * t8 * t9 * t122 * t69 - t133 * t136 / 0.1152e4);
  if(vrho != NULL && (p->info->flags & XC_FLAGS_HAVE_VXC))
    vrho[0] = 0.2e1 * rho[0] * t140 + 0.2e1 * t73;

  t143 = params->k0 * t11;
  t148 = t41 * params->e1;
  t149 = t148 * t23;
  t150 = t39 * t11;
  t151 = t150 * t20;
  t153 = t46 * t11;
  t155 = t109 * t153 * t20;
  t157 = -t149 * t151 / 0.2e1 - t155 / 0.2e1;
  t158 = t95 * t157;
  t161 = t143 * t20 * t32 * t50 / 0.8e1 - t35 * t158 / 0.4e1;
  t166 = 0.1e1 / t61;
  t167 = t166 * t52;
  t172 = t54 * t56 * sigma[0] * t10;
  t176 = my_piecewise3(t4, 0, -0.3e1 / 0.8e1 * t8 * t9 * t161 * t69 + t8 * t167 * t131 * t172 / 0.3072e4);
  if(vrho != NULL && (p->info->flags & XC_FLAGS_HAVE_VXC))
    vsigma[0] = 0.2e1 * rho[0] * t176;

  if(vrho != NULL && (p->info->flags & XC_FLAGS_NEEDS_LAPLACIAN) && (p->info->flags & XC_FLAGS_HAVE_VXC))
    vlapl[0] = 0.0e0;

  t178 = t11 * t15;
  t182 = params->k0 * (-t178 * t32 + t88 * t178);
  t184 = t150 * t15;
  t186 = t101 * t11;
  t190 = -0.2e1 * t37 * t186 * t15 + 0.2e1 * t96 * t184;
  t196 = t114 * t11;
  t200 = 0.4e1 * t109 * t153 * t15 - 0.4e1 * t44 * t196 * t15 + 0.2e1 * t41 * t190;
  t201 = t95 * t200;
  t204 = t182 * t50 - t35 * t201 / 0.4e1;
  t209 = my_piecewise3(t4, 0, -0.3e1 / 0.8e1 * t8 * t9 * t204 * t69);
  if(vrho != NULL && (p->info->flags & XC_FLAGS_HAVE_VXC))
    vtau[0] = 0.2e1 * rho[0] * t209;

#ifndef XC_DONT_COMPILE_FXC

  if(order < 2) return;


  t227 = t12 * t83;
  t233 = 0.40e2 / 0.9e1 * t227 - 0.11e2 / 0.9e1 * t17 / t13 / t60;
  t237 = t23 * t101;
  t238 = tau[0] * tau[0];
  t240 = t238 * t10 * t63;
  t250 = t48 * t48;
  t252 = 0.1e1 / t49 / t250;
  t253 = t118 * t118;
  t257 = t105 * t105;
  t259 = t86 * t86;
  t263 = t96 * t101;
  t265 = t11 * t20;
  t266 = t86 * tau[0] * t265;
  t272 = t37 * t46;
  t280 = params->c1 * t36;
  t284 = t109 * t114;
  t291 = 0.1e1 / t45 / t38;
  t292 = t44 * t291;
  t311 = t60 * t60;
  t316 = t67 * t67;
  t318 = 0.1e1 / t68 / t316;
  t321 = params->b * params->b;
  t322 = t321 * t24;
  t323 = t26 * t26;
  t325 = 0.1e1 / t28 / t323;
  t326 = t58 * t58;
  t333 = my_piecewise3(t4, 0, t8 * t15 * t52 * t69 / 0.12e2 - t8 * t74 * t122 * t69 / 0.4e1 + 0.17e2 / 0.3456e4 * t8 / t60 / t81 * t52 * t131 * t136 - 0.3e1 / 0.8e1 * t8 * t9 * (params->k0 * (-t233 * t32 - 0.10e2 / 0.3e1 * t97 * t79 - 0.100e3 / 0.9e1 * t237 * t240 + 0.40e2 / 0.9e1 * t88 * t227) * t50 - t92 * t119 / 0.2e1 + 0.5e1 / 0.16e2 * t35 * t252 * t253 - t35 * t95 * (0.2e1 * t257 + 0.2e1 * t41 * (0.2e1 * params->e1 * t259 * t39 + 0.40e2 / 0.3e1 * t263 * t266 + 0.2e1 * t96 * t39 * t233 + 0.100e3 / 0.3e1 * t272 * t240 - 0.80e2 / 0.9e1 * t102 * t227) + 0.12e2 * t280 * t46 * t259 + 0.160e3 / 0.3e1 * t284 * t266 + 0.4e1 * t109 * t46 * t233 + 0.1000e4 / 0.9e1 * t292 * t240 - 0.160e3 / 0.9e1 * t115 * t227) / 0.4e1) * t69 - t8 * t128 * t122 * t131 * t136 / 0.576e3 - t8 / t9 / t311 / t60 * t52 * t318 * t322 * t325 * t326 * t11 / 0.9216e4);
  if(v2rho2 != NULL && (p->info->flags & XC_FLAGS_HAVE_FXC))
    v2rho2[0] = 0.2e1 * rho[0] * t333 + 0.4e1 * t140;

  t344 = params->k0 * t10;
  t350 = t143 * t20;
  t351 = t32 * t95;
  t368 = t101 * t10;
  t376 = t280 * t46;
  t380 = t10 * t63;
  t421 = my_piecewise3(t4, 0, -t8 * t74 * t161 * t69 / 0.8e1 - 0.3e1 / 0.8e1 * t8 * t9 * (-t143 * t83 * t32 * t50 / 0.3e1 + 0.5e1 / 0.12e2 * t344 * t63 * t39 * t50 * tau[0] - t350 * t351 * t118 / 0.32e2 - t92 * t158 / 0.4e1 + 0.5e1 / 0.16e2 * t35 * t252 * t157 * t118 - t35 * t95 * (-t105 * params->e1 * t23 * t151 / 0.2e1 - t148 * t86 * t151 / 0.2e1 - 0.10e2 / 0.3e1 * t149 * t368 * t63 * tau[0] + 0.4e1 / 0.3e1 * t149 * t150 * t83 - 0.3e1 / 0.2e1 * t376 * t265 * t86 - 0.20e2 / 0.3e1 * t284 * t380 * tau[0] + 0.4e1 / 0.3e1 * t109 * t153 * t83) / 0.4e1) * t69 - t8 * t128 * t161 * t131 * t136 / 0.1152e4 - 0.5e1 / 0.3072e4 * t133 * t172 + t8 * t166 * t122 * t131 * t172 / 0.3072e4 + t8 / t9 / t311 / t81 * t52 * t318 * t322 * t325 * t58 * sigma[0] * t11 / 0.24576e5);
  if(v2rho2 != NULL && (p->info->flags & XC_FLAGS_HAVE_FXC))
    v2rhosigma[0] = 0.2e1 * rho[0] * t421 + 0.2e1 * t176;

  if(v2rho2 != NULL && (p->info->flags & XC_FLAGS_NEEDS_LAPLACIAN) && (p->info->flags & XC_FLAGS_HAVE_FXC))
    v2rholapl[0] = 0.0e0;

  t431 = 0.1e1 / t9 / t60;
  t432 = t10 * t431;
  t437 = t432 * tau[0];
  t449 = t252 * t200;
  t462 = t178 * t86;
  t500 = my_piecewise3(t4, 0, -t8 * t74 * t204 * t69 / 0.8e1 - 0.3e1 / 0.8e1 * t8 * t9 * (params->k0 * (0.5e1 / 0.3e1 * t265 * t32 - 0.10e2 / 0.3e1 * t432 * t39 * tau[0] + t97 * t178 + 0.20e2 / 0.3e1 * t237 * t437 - 0.5e1 / 0.3e1 * t88 * t265) * t50 - t182 * t119 / 0.4e1 - t92 * t201 / 0.4e1 + 0.5e1 / 0.16e2 * t35 * t449 * t118 - t35 * t95 * (0.2e1 * t105 * t190 + 0.2e1 * t41 * (0.2e1 * params->e1 * t86 * t184 + 0.40e2 / 0.3e1 * t263 * t437 - 0.10e2 / 0.3e1 * t96 * t151 - 0.4e1 * t263 * t462 - 0.20e2 * t272 * t437 + 0.10e2 / 0.3e1 * t37 * t186 * t20) + 0.12e2 * t376 * t462 + 0.160e3 / 0.3e1 * t284 * t437 - 0.20e2 / 0.3e1 * t155 - 0.16e2 * t284 * t462 - 0.200e3 / 0.3e1 * t292 * t437 + 0.20e2 / 0.3e1 * t44 * t196 * t20) / 0.4e1) * t69 - t8 * t128 * t204 * t131 * t136 / 0.1152e4);
  if(v2rho2 != NULL && (p->info->flags & XC_FLAGS_HAVE_FXC))
    v2rhotau[0] = 0.2e1 * rho[0] * t500 + 0.2e1 * t209;

  t506 = t157 * t157;
  t510 = params->e1 * params->e1;
  t512 = t46 * t10;
  t513 = t512 * t63;
  t554 = my_piecewise3(t4, 0, -0.3e1 / 0.8e1 * t8 * t9 * (-t350 * t351 * t157 / 0.16e2 + 0.5e1 / 0.16e2 * t35 * t252 * t506 - t35 * t95 * (t510 * t36 * t513 / 0.4e1 + t148 * t380 * t39 / 0.8e1 + 0.3e1 / 0.8e1 * t280 * t513) / 0.4e1) * t69 + t8 * t166 * t161 * t131 * t172 / 0.1536e4 - t8 / t9 / t311 / t18 * t52 * t318 * t322 * t325 * t58 * t11 / 0.65536e5 + t8 * t167 * t131 * params->b * t25 * t56 * t10 / 0.3072e4);
  if(v2rho2 != NULL && (p->info->flags & XC_FLAGS_HAVE_FXC))
    v2sigma2[0] = 0.2e1 * rho[0] * t554;

  if(v2rho2 != NULL && (p->info->flags & XC_FLAGS_NEEDS_LAPLACIAN) && (p->info->flags & XC_FLAGS_HAVE_FXC))
    v2sigmalapl[0] = 0.0e0;

  t556 = t431 * t39;
  t572 = params->e1 * t10;
  t583 = t114 * t10;
  t602 = my_piecewise3(t4, 0, -0.3e1 / 0.8e1 * t8 * t9 * (-t344 * t556 * t50 / 0.4e1 - t182 * t158 / 0.4e1 - t350 * t351 * t200 / 0.32e2 + 0.5e1 / 0.16e2 * t35 * t449 * t157 - t35 * t95 * (-t96 * t39 * t265 * t190 / 0.2e1 + 0.2e1 * t41 * (-t572 * t556 / 0.2e1 + t96 * t368 * t431) - 0.3e1 * t280 * t512 * t431 + 0.4e1 * t109 * t583 * t431) / 0.4e1) * t69 + t8 * t166 * t204 * t131 * t172 / 0.3072e4);
  if(v2rho2 != NULL && (p->info->flags & XC_FLAGS_HAVE_FXC))
    v2sigmatau[0] = 0.2e1 * rho[0] * t602;

  if(v2rho2 != NULL && (p->info->flags & XC_FLAGS_NEEDS_LAPLACIAN) && (p->info->flags & XC_FLAGS_HAVE_FXC))
    v2lapl2[0] = 0.0e0;

  if(v2rho2 != NULL && (p->info->flags & XC_FLAGS_NEEDS_LAPLACIAN) && (p->info->flags & XC_FLAGS_HAVE_FXC))
    v2lapltau[0] = 0.0e0;

  t605 = 0.1e1 / t9 / t81;
  t606 = t10 * t605;
  t615 = t200 * t200;
  t619 = t190 * t190;
  t627 = t512 * t605;
  t651 = my_piecewise3(t4, 0, -0.3e1 / 0.8e1 * t8 * t9 * (params->k0 * (-0.4e1 * t237 * t606 + 0.4e1 * t606 * t39) * t50 - t182 * t201 / 0.2e1 + 0.5e1 / 0.16e2 * t35 * t252 * t615 - t35 * t95 * (0.2e1 * t619 + 0.2e1 * t41 * (-0.16e2 * t96 * t368 * t605 + 0.4e1 * t572 * t605 * t39 + 0.12e2 * t37 * t627) + 0.24e2 * t280 * t627 - 0.64e2 * t109 * t583 * t605 + 0.40e2 * t44 * t291 * t10 * t605) / 0.4e1) * t69);
  if(v2rho2 != NULL && (p->info->flags & XC_FLAGS_HAVE_FXC))
    v2tau2[0] = 0.2e1 * rho[0] * t651;

#ifndef XC_DONT_COMPILE_KXC

  if(order < 3) return;


#endif

#endif

#endif


}


static inline void
func_pol(const xc_func_type *p, int order, const double *rho, const double *sigma, const double *lapl, const double *tau , double *zk MGGA_OUT_PARAMS_NO_EXC(XC_COMMA double *, ))
{

#ifndef XC_DONT_COMPILE_EXC
  double t2, t3, t4, t5, t7, t8, t10, t11;
  double t12, t13, t14, t15, t16, t17, t18, t19;
  double t20, t22, t23, t24, t26, t29, t30, t31;
  double t32, t33, t34, t36, t37, t38, t41, t42;
  double t43, t44, t45, t47, t48, t49, t50, t51;
  double t52, t54, t55, t56, t58, t59, t61, t62;
  double t63, t64, t67, t71, t72, t73, t74, t75;
  double t78, t79, t81, t82, t83, t84, t85, t86;
  double t88, t89, t90, t92, t95, t96, t97, t100;
  double t101, t102, t103, t104, t106, t107, t108, t109;
  double t110, t111, t113, t114, t115, t117, t118, t119;
  double t120, t123, t127, t128, t129, t130, t131, t134;

#ifndef XC_DONT_COMPILE_VXC
  double t135, t139, t140, t141, t143, t144, t145, t146;
  double t147, t148, t150, t151, t155, t157, t159, t162;
  double t164, t168, t171, t172, t173, t177, t178, t182;
  double t186, t191, t192, t196, t197, t200, t201, t202;
  double t205, t207, t209, t210, t211, t212, t213, t214;
  double t218, t219, t220, t222, t224, t226, t227, t228;
  double t229, t234, t238, t239, t240, t244, t247, t249;
  double t250, t254, t256, t258, t261, t263, t267, t270;
  double t271, t272, t276, t277, t281, t285, t290, t291;
  double t295, t296, t299, t300, t301, t304, t306, t308;
  double t309, t310, t311, t312, t316, t319, t320, t323;
  double t324, t326, t327, t329, t330, t333, t334, t335;
  double t339, t340, t342, t343, t344, t348, t349, t350;
  double t353, t354, t356, t357, t359, t360, t363, t364;
  double t365, t369, t370, t372, t373, t374, t378, t382;
  double t384, t386, t389, t392, t395, t398, t399, t402;
  double t403, t404, t407, t411, t413, t415, t418, t421;
  double t424, t427, t428, t431, t432, t433, t436;

#ifndef XC_DONT_COMPILE_FXC
  double t453, t456, t460, t467, t471, t472, t473, t476;
  double t477, t489, t491, t498, t499, t505, t509, t510;
  double t521, t523, t524, t528, t530, t536, t552, t563;
  double t583, t586, t592, t593, t604, t606, t611, t612;
  double t616, t618, t621, t625, t627, t629, t635, t646;
  double t661, t662, t666, t674, t680, t688, t696, t703;
  double t704, t717, t738, t742, t749, t753, t754, t759;
  double t765, t769, t770, t781, t783, t784, t788, t790;
  double t796, t812, t823, t858, t863, t864, t871, t880;
  double t884, t928, t938, t961, t965, t973, t975, t982;
  double t988, t995, t1007, t1011, t1055, t1083, t1089, t1111;
  double t1120, t1124, t1130, t1143, t1168, t1173, t1177, t1182;
  double t1188, t1213, t1222, t1226, t1232, t1245, t1270, t1275;
  double t1280, t1284, t1286, t1321, t1326, t1330, t1335, t1374;
  double t1414, t1454, t1463, t1467, t1475, t1498, t1507, t1511;
  double t1519, t1542;
#endif

#endif

#endif


  mgga_x_mvsb_params *params;

  assert(p->params != NULL);
  params = (mgga_x_mvsb_params * ) (p->params);

  t2 = 0.101e1 * p->threshold_dens;
  t3 = rho[0] <= t2;
  t4 = M_CBRT3;
  t5 = M_CBRTPI;
  t7 = t4 / t5;
  t8 = M_CBRT2;
  t10 = t7 * t8 * rho[0];
  t11 = rho[0] + rho[1];
  t12 = POW_1_3(t11);
  t13 = t12 * t12;
  t14 = 0.1e1 / t13;
  t15 = 0.1e1 / t11;
  t16 = rho[0] * t15;
  t17 = POW_1_3(t16);
  t18 = t14 * t17;
  t19 = POW_1_3(rho[0]);
  t20 = t19 * t19;
  t22 = 0.1e1 / t20 / rho[0];
  t23 = tau[0] * t22;
  t24 = rho[0] * rho[0];
  t26 = 0.1e1 / t20 / t24;
  t29 = t23 - sigma[0] * t26 / 0.8e1;
  t30 = M_CBRT6;
  t31 = t30 * t30;
  t32 = M_PI * M_PI;
  t33 = POW_1_3(t32);
  t34 = t33 * t33;
  t36 = 0.3e1 / 0.10e2 * t31 * t34;
  t37 = t23 - t36;
  t38 = 0.1e1 / t37;
  t41 = params->k0 * (-t29 * t38 + 0.1e1);
  t42 = t29 * t29;
  t43 = params->e1 * t42;
  t44 = t37 * t37;
  t45 = 0.1e1 / t44;
  t47 = t43 * t45 + 0.1e1;
  t48 = t47 * t47;
  t49 = t42 * t42;
  t50 = params->c1 * t49;
  t51 = t44 * t44;
  t52 = 0.1e1 / t51;
  t54 = t50 * t52 + t48;
  t55 = POW_1_4(t54);
  t56 = 0.1e1 / t55;
  t58 = t41 * t56 + 0.1e1;
  t59 = params->b * t31;
  t61 = 0.1e1 / t33 / t32;
  t62 = sigma[0] * sigma[0];
  t63 = t61 * t62;
  t64 = t24 * t24;
  t67 = 0.1e1 / t19 / t64 / rho[0];
  t71 = 0.1e1 + t59 * t63 * t67 / 0.576e3;
  t72 = pow(t71, 0.1e1 / 0.8e1);
  t73 = 0.1e1 / t72;
  t74 = t58 * t73;
  t75 = t18 * t74;
  t78 = my_piecewise3(t3, 0, -0.3e1 / 0.4e1 * t10 * t75);
  t79 = rho[1] <= t2;
  t81 = t7 * t8 * rho[1];
  t82 = rho[1] * t15;
  t83 = POW_1_3(t82);
  t84 = t14 * t83;
  t85 = POW_1_3(rho[1]);
  t86 = t85 * t85;
  t88 = 0.1e1 / t86 / rho[1];
  t89 = tau[1] * t88;
  t90 = rho[1] * rho[1];
  t92 = 0.1e1 / t86 / t90;
  t95 = t89 - sigma[2] * t92 / 0.8e1;
  t96 = t89 - t36;
  t97 = 0.1e1 / t96;
  t100 = params->k0 * (-t95 * t97 + 0.1e1);
  t101 = t95 * t95;
  t102 = params->e1 * t101;
  t103 = t96 * t96;
  t104 = 0.1e1 / t103;
  t106 = t102 * t104 + 0.1e1;
  t107 = t106 * t106;
  t108 = t101 * t101;
  t109 = params->c1 * t108;
  t110 = t103 * t103;
  t111 = 0.1e1 / t110;
  t113 = t109 * t111 + t107;
  t114 = POW_1_4(t113);
  t115 = 0.1e1 / t114;
  t117 = t100 * t115 + 0.1e1;
  t118 = sigma[2] * sigma[2];
  t119 = t61 * t118;
  t120 = t90 * t90;
  t123 = 0.1e1 / t85 / t120 / rho[1];
  t127 = 0.1e1 + t59 * t119 * t123 / 0.576e3;
  t128 = pow(t127, 0.1e1 / 0.8e1);
  t129 = 0.1e1 / t128;
  t130 = t117 * t129;
  t131 = t84 * t130;
  t134 = my_piecewise3(t79, 0, -0.3e1 / 0.4e1 * t81 * t131);
  if(zk != NULL && (p->info->flags & XC_FLAGS_HAVE_EXC))
    zk[0] = t78 + t134;

#ifndef XC_DONT_COMPILE_VXC

  if(order < 1) return;


  t135 = t7 * t8;
  t139 = 0.1e1 / t13 / t11;
  t140 = t139 * t17;
  t141 = t140 * t74;
  t143 = t10 * t141 / 0.2e1;
  t144 = t17 * t17;
  t145 = 0.1e1 / t144;
  t146 = t14 * t145;
  t147 = t11 * t11;
  t148 = 0.1e1 / t147;
  t150 = -rho[0] * t148 + t15;
  t151 = t74 * t150;
  t155 = tau[0] * t26;
  t157 = t24 * rho[0];
  t159 = 0.1e1 / t20 / t157;
  t162 = -0.5e1 / 0.3e1 * t155 + sigma[0] * t159 / 0.3e1;
  t164 = t29 * t45;
  t168 = params->k0 * (-t162 * t38 - 0.5e1 / 0.3e1 * t164 * t155);
  t171 = 0.1e1 / t55 / t54;
  t172 = params->e1 * t29;
  t173 = t45 * t162;
  t177 = 0.1e1 / t44 / t37;
  t178 = t177 * tau[0];
  t182 = 0.2e1 * t172 * t173 + 0.10e2 / 0.3e1 * t43 * t178 * t26;
  t186 = params->c1 * t42 * t29;
  t191 = 0.1e1 / t51 / t37;
  t192 = t191 * tau[0];
  t196 = 0.2e1 * t47 * t182 + 0.4e1 * t186 * t52 * t162 + 0.20e2 / 0.3e1 * t50 * t192 * t26;
  t197 = t171 * t196;
  t200 = t168 * t56 - t41 * t197 / 0.4e1;
  t201 = t200 * t73;
  t202 = t18 * t201;
  t205 = t67 * t14;
  t207 = t135 * t205 * t17;
  t209 = 0.1e1 / t72 / t71;
  t210 = t58 * t209;
  t211 = t210 * params->b;
  t212 = t31 * t61;
  t213 = t212 * t62;
  t214 = t211 * t213;
  t218 = my_piecewise3(t3, 0, -0.3e1 / 0.4e1 * t135 * t75 + t143 - t10 * t146 * t151 / 0.4e1 - 0.3e1 / 0.4e1 * t10 * t202 - t207 * t214 / 0.1152e4);
  t219 = t139 * t83;
  t220 = t219 * t130;
  t222 = t81 * t220 / 0.2e1;
  t224 = t7 * t8 * t90;
  t226 = 0.1e1 / t13 / t147;
  t227 = t83 * t83;
  t228 = 0.1e1 / t227;
  t229 = t226 * t228;
  t234 = my_piecewise3(t79, 0, t222 + t224 * t229 * t130 / 0.4e1);
  if(vrho != NULL && (p->info->flags & XC_FLAGS_HAVE_VXC))
    vrho[0] = t78 + t134 + t11 * (t218 + t234);

  t238 = t7 * t8 * t24;
  t239 = t226 * t145;
  t240 = t239 * t74;
  t244 = my_piecewise3(t3, 0, t143 + t238 * t240 / 0.4e1);
  t247 = t14 * t228;
  t249 = -rho[1] * t148 + t15;
  t250 = t130 * t249;
  t254 = tau[1] * t92;
  t256 = t90 * rho[1];
  t258 = 0.1e1 / t86 / t256;
  t261 = -0.5e1 / 0.3e1 * t254 + sigma[2] * t258 / 0.3e1;
  t263 = t95 * t104;
  t267 = params->k0 * (-t261 * t97 - 0.5e1 / 0.3e1 * t263 * t254);
  t270 = 0.1e1 / t114 / t113;
  t271 = params->e1 * t95;
  t272 = t104 * t261;
  t276 = 0.1e1 / t103 / t96;
  t277 = t276 * tau[1];
  t281 = 0.2e1 * t271 * t272 + 0.10e2 / 0.3e1 * t102 * t277 * t92;
  t285 = params->c1 * t101 * t95;
  t290 = 0.1e1 / t110 / t96;
  t291 = t290 * tau[1];
  t295 = 0.2e1 * t106 * t281 + 0.4e1 * t285 * t111 * t261 + 0.20e2 / 0.3e1 * t109 * t291 * t92;
  t296 = t270 * t295;
  t299 = t267 * t115 - t100 * t296 / 0.4e1;
  t300 = t299 * t129;
  t301 = t84 * t300;
  t304 = t123 * t14;
  t306 = t135 * t304 * t83;
  t308 = 0.1e1 / t128 / t127;
  t309 = t117 * t308;
  t310 = t309 * params->b;
  t311 = t212 * t118;
  t312 = t310 * t311;
  t316 = my_piecewise3(t79, 0, -0.3e1 / 0.4e1 * t135 * t131 + t222 - t81 * t247 * t250 / 0.4e1 - 0.3e1 / 0.4e1 * t81 * t301 - t306 * t312 / 0.1152e4);
  if(vrho != NULL && (p->info->flags & XC_FLAGS_HAVE_VXC))
    vrho[1] = t78 + t134 + t11 * (t244 + t316);

  t319 = params->k0 * t26;
  t320 = t38 * t56;
  t323 = t47 * params->e1;
  t324 = t164 * t26;
  t326 = t52 * t26;
  t327 = t186 * t326;
  t329 = -t323 * t324 / 0.2e1 - t327 / 0.2e1;
  t330 = t171 * t329;
  t333 = t319 * t320 / 0.8e1 - t41 * t330 / 0.4e1;
  t334 = t333 * t73;
  t335 = t18 * t334;
  t339 = 0.1e1 / t19 / t64;
  t340 = t339 * t14;
  t342 = t135 * t340 * t17;
  t343 = t212 * sigma[0];
  t344 = t211 * t343;
  t348 = my_piecewise3(t3, 0, -0.3e1 / 0.4e1 * t10 * t335 + t342 * t344 / 0.3072e4);
  if(vrho != NULL && (p->info->flags & XC_FLAGS_HAVE_VXC))
    vsigma[0] = t11 * t348;

  if(vrho != NULL && (p->info->flags & XC_FLAGS_HAVE_VXC))
    vsigma[1] = 0.0e0;

  t349 = params->k0 * t92;
  t350 = t97 * t115;
  t353 = t106 * params->e1;
  t354 = t263 * t92;
  t356 = t111 * t92;
  t357 = t285 * t356;
  t359 = -t353 * t354 / 0.2e1 - t357 / 0.2e1;
  t360 = t270 * t359;
  t363 = t349 * t350 / 0.8e1 - t100 * t360 / 0.4e1;
  t364 = t363 * t129;
  t365 = t84 * t364;
  t369 = 0.1e1 / t85 / t120;
  t370 = t369 * t14;
  t372 = t135 * t370 * t83;
  t373 = t212 * sigma[2];
  t374 = t310 * t373;
  t378 = my_piecewise3(t79, 0, -0.3e1 / 0.4e1 * t81 * t365 + t372 * t374 / 0.3072e4);
  if(vrho != NULL && (p->info->flags & XC_FLAGS_HAVE_VXC))
    vsigma[2] = t11 * t378;

  if(vrho != NULL && (p->info->flags & XC_FLAGS_NEEDS_LAPLACIAN) && (p->info->flags & XC_FLAGS_HAVE_VXC))
    vlapl[0] = 0.0e0;

  if(vrho != NULL && (p->info->flags & XC_FLAGS_NEEDS_LAPLACIAN) && (p->info->flags & XC_FLAGS_HAVE_VXC))
    vlapl[1] = 0.0e0;

  t382 = params->k0 * (t164 * t22 - t22 * t38);
  t384 = t45 * t22;
  t386 = t177 * t22;
  t389 = 0.2e1 * t172 * t384 - 0.2e1 * t43 * t386;
  t392 = t52 * t22;
  t395 = t191 * t22;
  t398 = 0.4e1 * t186 * t392 + 0.2e1 * t47 * t389 - 0.4e1 * t50 * t395;
  t399 = t171 * t398;
  t402 = t382 * t56 - t41 * t399 / 0.4e1;
  t403 = t402 * t73;
  t404 = t18 * t403;
  t407 = my_piecewise3(t3, 0, -0.3e1 / 0.4e1 * t10 * t404);
  if(vrho != NULL && (p->info->flags & XC_FLAGS_HAVE_VXC))
    vtau[0] = t11 * t407;

  t411 = params->k0 * (t263 * t88 - t88 * t97);
  t413 = t104 * t88;
  t415 = t276 * t88;
  t418 = -0.2e1 * t102 * t415 + 0.2e1 * t271 * t413;
  t421 = t111 * t88;
  t424 = t290 * t88;
  t427 = 0.2e1 * t106 * t418 - 0.4e1 * t109 * t424 + 0.4e1 * t285 * t421;
  t428 = t270 * t427;
  t431 = t411 * t115 - t100 * t428 / 0.4e1;
  t432 = t431 * t129;
  t433 = t84 * t432;
  t436 = my_piecewise3(t79, 0, -0.3e1 / 0.4e1 * t81 * t433);
  if(vrho != NULL && (p->info->flags & XC_FLAGS_HAVE_VXC))
    vtau[1] = t11 * t436;

#ifndef XC_DONT_COMPILE_FXC

  if(order < 2) return;


  t453 = t135 * t67 * t139 * t17 * t214;
  t456 = t200 * t209 * params->b;
  t460 = t64 * t64;
  t467 = t71 * t71;
  t471 = params->b * params->b;
  t472 = t58 / t72 / t467 * t471;
  t473 = t32 * t32;
  t476 = t30 / t34 / t473;
  t477 = t62 * t62;
  t489 = t135 * t141;
  t491 = t7 * t8 * t14;
  t498 = t10 * t140 * t201;
  t499 = tau[0] * t159;
  t505 = 0.40e2 / 0.9e1 * t499 - 0.11e2 / 0.9e1 * sigma[0] / t20 / t64;
  t509 = t29 * t177;
  t510 = tau[0] * tau[0];
  t521 = t54 * t54;
  t523 = 0.1e1 / t55 / t521;
  t524 = t196 * t196;
  t528 = t182 * t182;
  t530 = t162 * t162;
  t536 = t162 * tau[0] * t26;
  t552 = params->c1 * t42;
  t563 = 0.1e1 / t51 / t44;
  t583 = 0.5e1 / 0.6e1 * t10 * t226 * t17 * t74;
  t586 = t10 * t139 * t145 * t151;
  t592 = t147 * t11;
  t593 = 0.1e1 / t592;
  t604 = 0.1e1 / t144 / t16;
  t606 = t150 * t150;
  t611 = 0.13e2 / 0.3456e4 * t135 * t18 * t58 * t209 * params->b * t31 * t63 / t19 / t64 / t24 + t453 / 0.864e3 - t207 * t456 * t213 / 0.576e3 - t135 / t20 / t460 / t157 * t14 * t17 * t472 * t476 * t477 / 0.18432e5 - t135 * t205 * t145 * t210 * t150 * t59 * t63 / 0.1728e4 + t489 - t491 * t145 * t58 * t73 * t150 / 0.2e1 + t498 - 0.3e1 / 0.4e1 * t10 * t18 * (params->k0 * (-t505 * t38 - 0.10e2 / 0.3e1 * t173 * t155 - 0.50e2 / 0.9e1 * t509 * t510 * t67 + 0.40e2 / 0.9e1 * t164 * t499) * t56 - t168 * t197 / 0.2e1 + 0.5e1 / 0.16e2 * t41 * t523 * t524 - t41 * t171 * (0.2e1 * t528 + 0.2e1 * t47 * (0.2e1 * params->e1 * t530 * t45 + 0.40e2 / 0.3e1 * t172 * t177 * t536 + 0.2e1 * t172 * t45 * t505 + 0.50e2 / 0.3e1 * t43 * t52 * t510 * t67 - 0.80e2 / 0.9e1 * t43 * t178 * t159) + 0.12e2 * t552 * t52 * t530 + 0.160e3 / 0.3e1 * t186 * t191 * t536 + 0.4e1 * t186 * t52 * t505 + 0.500e3 / 0.9e1 * t50 * t563 * t510 * t67 - 0.160e3 / 0.9e1 * t50 * t192 * t159) / 0.4e1) * t73 - t583 + t586 / 0.3e1 - t10 * t146 * t201 * t150 / 0.2e1 - t10 * t146 * t74 * (0.2e1 * rho[0] * t593 - 0.2e1 * t148) / 0.4e1 - 0.3e1 / 0.2e1 * t135 * t202 + t10 * t14 * t604 * t74 * t606 / 0.6e1;
  t612 = my_piecewise3(t3, 0, t611);
  t616 = 0.5e1 / 0.6e1 * t81 * t226 * t83 * t130;
  t618 = 0.1e1 / t13 / t592;
  t621 = t224 * t618 * t228 * t130;
  t625 = t147 * t147;
  t627 = 0.1e1 / t13 / t625;
  t629 = 0.1e1 / t227 / t82;
  t635 = my_piecewise3(t79, 0, -t616 - 0.5e1 / 0.6e1 * t621 + t7 * t8 * t256 * t627 * t629 * t130 / 0.6e1);
  if(v2rho2 != NULL && (p->info->flags & XC_FLAGS_HAVE_FXC))
    v2rho2[0] = 0.2e1 * t218 + 0.2e1 * t234 + t11 * (t612 + t635);

  t646 = t238 * t618 * t145 * t74;
  t661 = my_piecewise3(t3, 0, t489 / 0.2e1 - t583 + t586 / 0.6e1 + t498 / 0.2e1 + t453 / 0.1728e4 + t10 * t240 / 0.2e1 - 0.2e1 / 0.3e1 * t646 - t238 * t226 * t604 * t151 / 0.6e1 + t238 * t239 * t201 / 0.4e1 + t135 * t339 * t226 * t145 * t214 / 0.3456e4);
  t662 = t135 * t220;
  t666 = t228 * t117;
  t674 = t81 * t139 * t228 * t250;
  t680 = rho[1] * t593;
  t688 = t81 * t219 * t300;
  t696 = t135 * t123 * t139 * t83 * t312;
  t703 = t662 / 0.2e1 + t7 * t8 * t226 * t666 * t129 * rho[1] / 0.4e1 - t616 - t621 / 0.6e1 + t674 / 0.6e1 - t224 * t226 * t629 * t250 / 0.6e1 - t81 * t247 * t130 * (-t148 + 0.2e1 * t680) / 0.4e1 + t688 / 0.2e1 + t224 * t229 * t300 / 0.4e1 + t696 / 0.1728e4 + t135 * t369 * t226 * t228 * t312 / 0.3456e4;
  t704 = my_piecewise3(t79, 0, t703);
  if(v2rho2 != NULL && (p->info->flags & XC_FLAGS_HAVE_FXC))
    v2rho2[1] = t218 + t234 + t244 + t316 + t11 * (t661 + t704);

  t717 = my_piecewise3(t3, 0, -t583 - 0.5e1 / 0.6e1 * t646 + t7 * t8 * t157 * t627 * t604 * t74 / 0.6e1);
  t738 = t299 * t308 * params->b;
  t742 = t120 * t120;
  t749 = t127 * t127;
  t753 = t117 / t128 / t749 * t471;
  t754 = t118 * t118;
  t759 = tau[1] * t258;
  t765 = 0.40e2 / 0.9e1 * t759 - 0.11e2 / 0.9e1 * sigma[2] / t86 / t120;
  t769 = t95 * t276;
  t770 = tau[1] * tau[1];
  t781 = t113 * t113;
  t783 = 0.1e1 / t114 / t781;
  t784 = t295 * t295;
  t788 = t281 * t281;
  t790 = t261 * t261;
  t796 = t261 * tau[1] * t92;
  t812 = params->c1 * t101;
  t823 = 0.1e1 / t110 / t103;
  t858 = t249 * t249;
  t863 = t696 / 0.864e3 - t135 * t304 * t228 * t309 * t249 * t59 * t119 / 0.1728e4 + 0.13e2 / 0.3456e4 * t135 * t84 * t117 * t308 * params->b * t31 * t119 / t85 / t120 / t90 - t306 * t738 * t311 / 0.576e3 - t135 / t86 / t742 / t256 * t14 * t83 * t753 * t476 * t754 / 0.18432e5 - 0.3e1 / 0.4e1 * t81 * t84 * (params->k0 * (-t765 * t97 - 0.10e2 / 0.3e1 * t272 * t254 - 0.50e2 / 0.9e1 * t769 * t770 * t123 + 0.40e2 / 0.9e1 * t263 * t759) * t115 - t267 * t296 / 0.2e1 + 0.5e1 / 0.16e2 * t100 * t783 * t784 - t100 * t270 * (0.2e1 * t788 + 0.2e1 * t106 * (0.2e1 * params->e1 * t790 * t104 + 0.40e2 / 0.3e1 * t271 * t276 * t796 + 0.2e1 * t271 * t104 * t765 + 0.50e2 / 0.3e1 * t102 * t111 * t770 * t123 - 0.80e2 / 0.9e1 * t102 * t277 * t258) + 0.12e2 * t812 * t111 * t790 + 0.160e3 / 0.3e1 * t285 * t290 * t796 + 0.4e1 * t285 * t111 * t765 + 0.500e3 / 0.9e1 * t109 * t823 * t770 * t123 - 0.160e3 / 0.9e1 * t109 * t291 * t258) / 0.4e1) * t129 + t662 - t491 * t666 * t129 * t249 / 0.2e1 - t616 + t688 - t81 * t247 * t300 * t249 / 0.2e1 - t81 * t247 * t130 * (-0.2e1 * t148 + 0.2e1 * t680) / 0.4e1 - 0.3e1 / 0.2e1 * t135 * t301 + t674 / 0.3e1 + t81 * t14 * t629 * t130 * t858 / 0.6e1;
  t864 = my_piecewise3(t79, 0, t863);
  if(v2rho2 != NULL && (p->info->flags & XC_FLAGS_HAVE_FXC))
    v2rho2[2] = 0.2e1 * t244 + 0.2e1 * t316 + t11 * (t717 + t864);

  t871 = t10 * t140 * t334 / 0.2e1;
  t880 = t45 * t56;
  t884 = t38 * t171;
  t928 = t333 * t209 * params->b;
  t938 = t135 * t339 * t139 * t17 * t344 / 0.4608e4;
  t961 = my_piecewise3(t3, 0, -0.3e1 / 0.4e1 * t135 * t335 + t871 - t10 * t146 * t334 * t150 / 0.4e1 - 0.3e1 / 0.4e1 * t10 * t18 * (-params->k0 * t159 * t320 / 0.3e1 + 0.5e1 / 0.24e2 * params->k0 * t67 * t880 * tau[0] - t319 * t884 * t196 / 0.32e2 - t168 * t330 / 0.4e1 + 0.5e1 / 0.16e2 * t41 * t523 * t329 * t196 - t41 * t171 * (-t182 * params->e1 * t324 / 0.2e1 - t323 * t173 * t26 / 0.2e1 - 0.5e1 / 0.3e1 * t323 * t29 * t177 * t67 * tau[0] + 0.4e1 / 0.3e1 * t323 * t164 * t159 - 0.3e1 / 0.2e1 * t552 * t326 * t162 - 0.10e2 / 0.3e1 * t186 * t191 * t67 * tau[0] + 0.4e1 / 0.3e1 * t186 * t52 * t159) / 0.4e1) * t73 - t207 * t928 * t213 / 0.1152e4 - 0.13e2 / 0.9216e4 * t207 * t344 - t938 + t135 * t340 * t145 * t211 * t212 * sigma[0] * t150 / 0.9216e4 + t342 * t456 * t343 / 0.3072e4 + t135 / t20 / t460 / t24 * t14 * t17 * t472 * t476 * t62 * sigma[0] / 0.49152e5);
  if(v2rho2 != NULL && (p->info->flags & XC_FLAGS_HAVE_FXC))
    v2rhosigma[0] = t11 * t961 + t348;

  if(v2rho2 != NULL && (p->info->flags & XC_FLAGS_HAVE_FXC))
    v2rhosigma[1] = 0.0e0;

  t965 = t81 * t219 * t364 / 0.2e1;
  t973 = t135 * t369 * t139 * t83 * t374 / 0.4608e4;
  t975 = 0.1e1 / t85 / t256;
  t982 = my_piecewise3(t79, 0, t965 + t224 * t229 * t364 / 0.4e1 - t973 - t135 * t975 * t226 * t228 * t374 / 0.9216e4);
  if(v2rho2 != NULL && (p->info->flags & XC_FLAGS_HAVE_FXC))
    v2rhosigma[2] = t11 * t982 + t378;

  t988 = 0.1e1 / t19 / t157;
  t995 = my_piecewise3(t3, 0, t871 + t238 * t239 * t334 / 0.4e1 - t938 - t135 * t988 * t226 * t145 * t344 / 0.9216e4);
  if(v2rho2 != NULL && (p->info->flags & XC_FLAGS_HAVE_FXC))
    v2rhosigma[3] = t11 * t995 + t348;

  if(v2rho2 != NULL && (p->info->flags & XC_FLAGS_HAVE_FXC))
    v2rhosigma[4] = 0.0e0;

  t1007 = t104 * t115;
  t1011 = t97 * t270;
  t1055 = t363 * t308 * params->b;
  t1083 = my_piecewise3(t79, 0, -0.3e1 / 0.4e1 * t135 * t365 + t965 - t81 * t247 * t364 * t249 / 0.4e1 - 0.3e1 / 0.4e1 * t81 * t84 * (-params->k0 * t258 * t350 / 0.3e1 + 0.5e1 / 0.24e2 * params->k0 * t123 * t1007 * tau[1] - t349 * t1011 * t295 / 0.32e2 - t267 * t360 / 0.4e1 + 0.5e1 / 0.16e2 * t100 * t783 * t359 * t295 - t100 * t270 * (-t281 * params->e1 * t354 / 0.2e1 - t353 * t272 * t92 / 0.2e1 - 0.5e1 / 0.3e1 * t353 * t95 * t276 * t123 * tau[1] + 0.4e1 / 0.3e1 * t353 * t263 * t258 - 0.3e1 / 0.2e1 * t812 * t356 * t261 - 0.10e2 / 0.3e1 * t285 * t290 * t123 * tau[1] + 0.4e1 / 0.3e1 * t285 * t111 * t258) / 0.4e1) * t129 - t306 * t1055 * t311 / 0.1152e4 - 0.13e2 / 0.9216e4 * t306 * t374 - t973 + t135 * t370 * t228 * t310 * t212 * sigma[2] * t249 / 0.9216e4 + t372 * t738 * t373 / 0.3072e4 + t135 / t86 / t742 / t90 * t14 * t83 * t753 * t476 * t118 * sigma[2] / 0.49152e5);
  if(v2rho2 != NULL && (p->info->flags & XC_FLAGS_HAVE_FXC))
    v2rhosigma[5] = t11 * t1083 + t378;

  if(v2rho2 != NULL && (p->info->flags & XC_FLAGS_NEEDS_LAPLACIAN) && (p->info->flags & XC_FLAGS_HAVE_FXC))
    v2rholapl[0] = 0.0e0;

  if(v2rho2 != NULL && (p->info->flags & XC_FLAGS_NEEDS_LAPLACIAN) && (p->info->flags & XC_FLAGS_HAVE_FXC))
    v2rholapl[1] = 0.0e0;

  if(v2rho2 != NULL && (p->info->flags & XC_FLAGS_NEEDS_LAPLACIAN) && (p->info->flags & XC_FLAGS_HAVE_FXC))
    v2rholapl[2] = 0.0e0;

  if(v2rho2 != NULL && (p->info->flags & XC_FLAGS_NEEDS_LAPLACIAN) && (p->info->flags & XC_FLAGS_HAVE_FXC))
    v2rholapl[3] = 0.0e0;

  t1089 = t10 * t140 * t403 / 0.2e1;
  t1111 = t523 * t398;
  t1120 = t177 * t339;
  t1124 = t45 * t26;
  t1130 = t52 * t339;
  t1143 = t191 * t339;
  t1168 = t402 * t209 * params->b;
  t1173 = my_piecewise3(t3, 0, -0.3e1 / 0.4e1 * t135 * t404 + t1089 - t10 * t146 * t403 * t150 / 0.4e1 - 0.3e1 / 0.4e1 * t10 * t18 * (params->k0 * (0.5e1 / 0.3e1 * t26 * t38 - 0.5e1 / 0.3e1 * t339 * t45 * tau[0] + t173 * t22 + 0.10e2 / 0.3e1 * t509 * t339 * tau[0] - 0.5e1 / 0.3e1 * t324) * t56 - t382 * t197 / 0.4e1 - t168 * t399 / 0.4e1 + 0.5e1 / 0.16e2 * t41 * t1111 * t196 - t41 * t171 * (0.2e1 * t182 * t389 + 0.2e1 * t47 * (0.2e1 * params->e1 * t162 * t384 + 0.20e2 / 0.3e1 * t172 * t1120 * tau[0] - 0.10e2 / 0.3e1 * t172 * t1124 - 0.4e1 * t172 * t386 * t162 - 0.10e2 * t43 * t1130 * tau[0] + 0.10e2 / 0.3e1 * t43 * t177 * t26) + 0.12e2 * t552 * t392 * t162 + 0.80e2 / 0.3e1 * t186 * t1143 * tau[0] - 0.20e2 / 0.3e1 * t327 - 0.16e2 * t186 * t395 * t162 - 0.100e3 / 0.3e1 * t50 * t563 * t339 * tau[0] + 0.20e2 / 0.3e1 * t50 * t191 * t26) / 0.4e1) * t73 - t207 * t1168 * t213 / 0.1152e4);
  if(v2rho2 != NULL && (p->info->flags & XC_FLAGS_HAVE_FXC))
    v2rhotau[0] = t11 * t1173 + t407;

  t1177 = t81 * t219 * t432 / 0.2e1;
  t1182 = my_piecewise3(t79, 0, t1177 + t224 * t229 * t432 / 0.4e1);
  if(v2rho2 != NULL && (p->info->flags & XC_FLAGS_HAVE_FXC))
    v2rhotau[1] = t11 * t1182 + t436;

  t1188 = my_piecewise3(t3, 0, t1089 + t238 * t239 * t403 / 0.4e1);
  if(v2rho2 != NULL && (p->info->flags & XC_FLAGS_HAVE_FXC))
    v2rhotau[2] = t11 * t1188 + t407;

  t1213 = t783 * t427;
  t1222 = t276 * t369;
  t1226 = t104 * t92;
  t1232 = t111 * t369;
  t1245 = t290 * t369;
  t1270 = t431 * t308 * params->b;
  t1275 = my_piecewise3(t79, 0, -0.3e1 / 0.4e1 * t135 * t433 + t1177 - t81 * t247 * t432 * t249 / 0.4e1 - 0.3e1 / 0.4e1 * t81 * t84 * (params->k0 * (0.5e1 / 0.3e1 * t92 * t97 - 0.5e1 / 0.3e1 * t369 * t104 * tau[1] + t272 * t88 + 0.10e2 / 0.3e1 * t769 * t369 * tau[1] - 0.5e1 / 0.3e1 * t354) * t115 - t411 * t296 / 0.4e1 - t267 * t428 / 0.4e1 + 0.5e1 / 0.16e2 * t100 * t1213 * t295 - t100 * t270 * (0.2e1 * t281 * t418 + 0.2e1 * t106 * (0.2e1 * params->e1 * t261 * t413 + 0.20e2 / 0.3e1 * t271 * t1222 * tau[1] - 0.10e2 / 0.3e1 * t271 * t1226 - 0.4e1 * t271 * t415 * t261 - 0.10e2 * t102 * t1232 * tau[1] + 0.10e2 / 0.3e1 * t102 * t276 * t92) + 0.12e2 * t812 * t421 * t261 + 0.80e2 / 0.3e1 * t285 * t1245 * tau[1] - 0.20e2 / 0.3e1 * t357 - 0.16e2 * t285 * t424 * t261 - 0.100e3 / 0.3e1 * t109 * t823 * t369 * tau[1] + 0.20e2 / 0.3e1 * t109 * t290 * t92) / 0.4e1) * t129 - t306 * t1270 * t311 / 0.1152e4);
  if(v2rho2 != NULL && (p->info->flags & XC_FLAGS_HAVE_FXC))
    v2rhotau[3] = t11 * t1275 + t436;

  t1280 = t329 * t329;
  t1284 = params->e1 * params->e1;
  t1286 = t52 * t67;
  t1321 = t59 * t61;
  t1326 = my_piecewise3(t3, 0, -0.3e1 / 0.4e1 * t10 * t18 * (-t319 * t884 * t329 / 0.16e2 + 0.5e1 / 0.16e2 * t41 * t523 * t1280 - t41 * t171 * (t1284 * t42 * t1286 / 0.8e1 + t323 * t67 * t45 / 0.16e2 + 0.3e1 / 0.16e2 * t552 * t1286) / 0.4e1) * t73 + t342 * t928 * t343 / 0.1536e4 - t135 / t20 / t460 / rho[0] * t14 * t17 * t472 * t476 * t62 / 0.131072e6 + t7 * t8 * t339 * t14 * t17 * t58 * t209 * t1321 / 0.3072e4);
  if(v2rho2 != NULL && (p->info->flags & XC_FLAGS_HAVE_FXC))
    v2sigma2[0] = t11 * t1326;

  if(v2rho2 != NULL && (p->info->flags & XC_FLAGS_HAVE_FXC))
    v2sigma2[1] = 0.0e0;

  if(v2rho2 != NULL && (p->info->flags & XC_FLAGS_HAVE_FXC))
    v2sigma2[2] = 0.0e0;

  if(v2rho2 != NULL && (p->info->flags & XC_FLAGS_HAVE_FXC))
    v2sigma2[3] = 0.0e0;

  if(v2rho2 != NULL && (p->info->flags & XC_FLAGS_HAVE_FXC))
    v2sigma2[4] = 0.0e0;

  t1330 = t359 * t359;
  t1335 = t111 * t123;
  t1374 = my_piecewise3(t79, 0, -0.3e1 / 0.4e1 * t81 * t84 * (-t349 * t1011 * t359 / 0.16e2 + 0.5e1 / 0.16e2 * t100 * t783 * t1330 - t100 * t270 * (t1284 * t101 * t1335 / 0.8e1 + t353 * t123 * t104 / 0.16e2 + 0.3e1 / 0.16e2 * t812 * t1335) / 0.4e1) * t129 + t372 * t1055 * t373 / 0.1536e4 - t135 / t86 / t742 / rho[1] * t14 * t83 * t753 * t476 * t118 / 0.131072e6 + t7 * t8 * t369 * t14 * t83 * t117 * t308 * t1321 / 0.3072e4);
  if(v2rho2 != NULL && (p->info->flags & XC_FLAGS_HAVE_FXC))
    v2sigma2[5] = t11 * t1374;

  if(v2rho2 != NULL && (p->info->flags & XC_FLAGS_NEEDS_LAPLACIAN) && (p->info->flags & XC_FLAGS_HAVE_FXC))
    v2sigmalapl[0] = 0.0e0;

  if(v2rho2 != NULL && (p->info->flags & XC_FLAGS_NEEDS_LAPLACIAN) && (p->info->flags & XC_FLAGS_HAVE_FXC))
    v2sigmalapl[1] = 0.0e0;

  if(v2rho2 != NULL && (p->info->flags & XC_FLAGS_NEEDS_LAPLACIAN) && (p->info->flags & XC_FLAGS_HAVE_FXC))
    v2sigmalapl[2] = 0.0e0;

  if(v2rho2 != NULL && (p->info->flags & XC_FLAGS_NEEDS_LAPLACIAN) && (p->info->flags & XC_FLAGS_HAVE_FXC))
    v2sigmalapl[3] = 0.0e0;

  if(v2rho2 != NULL && (p->info->flags & XC_FLAGS_NEEDS_LAPLACIAN) && (p->info->flags & XC_FLAGS_HAVE_FXC))
    v2sigmalapl[4] = 0.0e0;

  if(v2rho2 != NULL && (p->info->flags & XC_FLAGS_NEEDS_LAPLACIAN) && (p->info->flags & XC_FLAGS_HAVE_FXC))
    v2sigmalapl[5] = 0.0e0;

  t1414 = my_piecewise3(t3, 0, -0.3e1 / 0.4e1 * t10 * t18 * (-params->k0 * t339 * t880 / 0.8e1 - t382 * t330 / 0.4e1 - t319 * t884 * t398 / 0.32e2 + 0.5e1 / 0.16e2 * t41 * t1111 * t329 - t41 * t171 * (-t172 * t1124 * t389 / 0.2e1 + 0.2e1 * t47 * (-params->e1 * t339 * t45 / 0.4e1 + t172 * t1120 / 0.2e1) - 0.3e1 / 0.2e1 * t552 * t1130 + 0.2e1 * t186 * t1143) / 0.4e1) * t73 + t342 * t1168 * t343 / 0.3072e4);
  if(v2rho2 != NULL && (p->info->flags & XC_FLAGS_HAVE_FXC))
    v2sigmatau[0] = t11 * t1414;

  if(v2rho2 != NULL && (p->info->flags & XC_FLAGS_HAVE_FXC))
    v2sigmatau[1] = 0.0e0;

  if(v2rho2 != NULL && (p->info->flags & XC_FLAGS_HAVE_FXC))
    v2sigmatau[2] = 0.0e0;

  if(v2rho2 != NULL && (p->info->flags & XC_FLAGS_HAVE_FXC))
    v2sigmatau[3] = 0.0e0;

  if(v2rho2 != NULL && (p->info->flags & XC_FLAGS_HAVE_FXC))
    v2sigmatau[4] = 0.0e0;

  t1454 = my_piecewise3(t79, 0, -0.3e1 / 0.4e1 * t81 * t84 * (-params->k0 * t369 * t1007 / 0.8e1 - t411 * t360 / 0.4e1 - t349 * t1011 * t427 / 0.32e2 + 0.5e1 / 0.16e2 * t100 * t1213 * t359 - t100 * t270 * (-t271 * t1226 * t418 / 0.2e1 + 0.2e1 * t106 * (-params->e1 * t369 * t104 / 0.4e1 + t271 * t1222 / 0.2e1) - 0.3e1 / 0.2e1 * t812 * t1232 + 0.2e1 * t285 * t1245) / 0.4e1) * t129 + t372 * t1270 * t373 / 0.3072e4);
  if(v2rho2 != NULL && (p->info->flags & XC_FLAGS_HAVE_FXC))
    v2sigmatau[5] = t11 * t1454;

  if(v2rho2 != NULL && (p->info->flags & XC_FLAGS_NEEDS_LAPLACIAN) && (p->info->flags & XC_FLAGS_HAVE_FXC))
    v2lapl2[0] = 0.0e0;

  if(v2rho2 != NULL && (p->info->flags & XC_FLAGS_NEEDS_LAPLACIAN) && (p->info->flags & XC_FLAGS_HAVE_FXC))
    v2lapl2[1] = 0.0e0;

  if(v2rho2 != NULL && (p->info->flags & XC_FLAGS_NEEDS_LAPLACIAN) && (p->info->flags & XC_FLAGS_HAVE_FXC))
    v2lapl2[2] = 0.0e0;

  if(v2rho2 != NULL && (p->info->flags & XC_FLAGS_NEEDS_LAPLACIAN) && (p->info->flags & XC_FLAGS_HAVE_FXC))
    v2lapltau[0] = 0.0e0;

  if(v2rho2 != NULL && (p->info->flags & XC_FLAGS_NEEDS_LAPLACIAN) && (p->info->flags & XC_FLAGS_HAVE_FXC))
    v2lapltau[1] = 0.0e0;

  if(v2rho2 != NULL && (p->info->flags & XC_FLAGS_NEEDS_LAPLACIAN) && (p->info->flags & XC_FLAGS_HAVE_FXC))
    v2lapltau[2] = 0.0e0;

  if(v2rho2 != NULL && (p->info->flags & XC_FLAGS_NEEDS_LAPLACIAN) && (p->info->flags & XC_FLAGS_HAVE_FXC))
    v2lapltau[3] = 0.0e0;

  t1463 = t398 * t398;
  t1467 = t389 * t389;
  t1475 = t52 * t988;
  t1498 = my_piecewise3(t3, 0, -0.3e1 / 0.4e1 * t10 * t18 * (params->k0 * (0.2e1 * t988 * t45 - 0.2e1 * t509 * t988) * t56 - t382 * t399 / 0.2e1 + 0.5e1 / 0.16e2 * t41 * t523 * t1463 - t41 * t171 * (0.2e1 * t1467 + 0.2e1 * t47 * (-0.8e1 * t172 * t177 * t988 + 0.2e1 * params->e1 * t988 * t45 + 0.6e1 * t43 * t1475) + 0.12e2 * t552 * t1475 - 0.32e2 * t186 * t191 * t988 + 0.20e2 * t50 * t563 * t988) / 0.4e1) * t73);
  if(v2rho2 != NULL && (p->info->flags & XC_FLAGS_HAVE_FXC))
    v2tau2[0] = t11 * t1498;

  if(v2rho2 != NULL && (p->info->flags & XC_FLAGS_HAVE_FXC))
    v2tau2[1] = 0.0e0;

  t1507 = t427 * t427;
  t1511 = t418 * t418;
  t1519 = t111 * t975;
  t1542 = my_piecewise3(t79, 0, -0.3e1 / 0.4e1 * t81 * t84 * (params->k0 * (0.2e1 * t975 * t104 - 0.2e1 * t769 * t975) * t115 - t411 * t428 / 0.2e1 + 0.5e1 / 0.16e2 * t100 * t783 * t1507 - t100 * t270 * (0.2e1 * t1511 + 0.2e1 * t106 * (0.2e1 * params->e1 * t975 * t104 - 0.8e1 * t271 * t276 * t975 + 0.6e1 * t102 * t1519) + 0.12e2 * t812 * t1519 - 0.32e2 * t285 * t290 * t975 + 0.20e2 * t109 * t823 * t975) / 0.4e1) * t129);
  if(v2rho2 != NULL && (p->info->flags & XC_FLAGS_HAVE_FXC))
    v2tau2[2] = t11 * t1542;

#ifndef XC_DONT_COMPILE_KXC

  if(order < 3) return;


#endif

#endif

#endif


}

