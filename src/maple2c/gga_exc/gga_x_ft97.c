/* 
  This file was generated automatically with ./scripts/maple2c.pl.
  Do not edit this file directly as it can be overwritten!!

  This Source Code Form is subject to the terms of the Mozilla Public
  License, v. 2.0. If a copy of the MPL was not distributed with this
  file, You can obtain one at http://mozilla.org/MPL/2.0/.

  Maple version     : Maple 2016 (X86 64 LINUX)
  Maple source      : ./maple/gga_exc/gga_x_ft97.mpl
  Type of functional: gga_exc
*/

#define maple2c_order 2
#define MAPLE2C_FLAGS (XC_FLAGS_I_HAVE_EXC | XC_FLAGS_I_HAVE_VXC | XC_FLAGS_I_HAVE_FXC)


static inline void
func_unpol(const xc_func_type *p, int order, const double *rho, const double *sigma , double *zk GGA_OUT_PARAMS_NO_EXC(XC_COMMA double *, ))
{

#ifndef XC_DONT_COMPILE_EXC
  double t3, t4, t5, t7, t8, t9, t11, t12;
  double t15, t16, t17, t18, t19, t20, t22, t23;
  double t24, t25, t27, t28, t29, t30, t31, t32;
  double t34, t35, t36, t40, t41, t44, t47, t51;

#ifndef XC_DONT_COMPILE_VXC
  double t52, t56, t58, t59, t60, t64, t65, t70;
  double t71, t72, t75, t76, t77, t80, t83, t84;
  double t85, t86, t89, t91, t94, t99, t104, t105;
  double t108, t109, t110, t113, t117, t120, t121, t125;
  double t128, t130, t133, t137;

#ifndef XC_DONT_COMPILE_FXC
  double t149, t156, t158, t159, t160, t175, t176, t177;
  double t181, t184, t192, t205, t220, t221, t248, t273;
  double t282, t297, t307, t336;
#endif

#endif

#endif


  gga_x_ft97_params *params;

  assert(p->params != NULL);
  params = (gga_x_ft97_params * )(p->params);

  t3 = rho[0] / 0.2e1 <= 0.101e1 * p->threshold_dens;
  t4 = M_CBRT3;
  t5 = M_CBRTPI;
  t7 = t4 / t5;
  t8 = POW_1_3(rho[0]);
  t9 = params->beta1 * sigma[0];
  t11 = params->beta2 + sigma[0] / 0.4e1;
  t12 = 0.1e1 / t11;
  t15 = params->beta0 + t9 * t12 / 0.4e1;
  t16 = t15 * sigma[0];
  t17 = M_CBRT2;
  t18 = t17 * t17;
  t19 = rho[0] * rho[0];
  t20 = t8 * t8;
  t22 = 0.1e1 / t20 / t19;
  t23 = t18 * t22;
  t24 = t16 * t23;
  t25 = t4 * t4;
  t27 = POW_1_3(0.1e1 / M_PI);
  t28 = 0.1e1 / t27;
  t29 = t25 * t28;
  t30 = M_CBRT4;
  t31 = sigma[0] * t18;
  t32 = t15 * t15;
  t34 = t31 * t22;
  t35 = log(t34 + sqrt(t34 * t34 + 0.1e1));
  t36 = t35 * t35;
  t40 = 0.9e1 * t31 * t22 * t32 * t36 + 0.1e1;
  t41 = sqrt(t40);
  t44 = t29 * t30 / t41;
  t47 = 0.1e1 + 0.2e1 / 0.9e1 * t24 * t44;
  t51 = my_piecewise3(t3, 0, -0.3e1 / 0.8e1 * t7 * t8 * t47);
  if(zk != NULL && (p->info->flags & XC_FLAGS_HAVE_EXC))
    zk[0] = 0.2e1 * t51;

#ifndef XC_DONT_COMPILE_VXC

  if(order < 1) return;


  t52 = 0.1e1 / t20;
  t56 = t19 * rho[0];
  t58 = 0.1e1 / t20 / t56;
  t59 = t18 * t58;
  t60 = t16 * t59;
  t64 = 0.1e1 / t41 / t40;
  t65 = t30 * t64;
  t70 = sigma[0] * sigma[0];
  t71 = t70 * t17;
  t72 = t19 * t19;
  t75 = 0.1e1 / t8 / t72 / t19;
  t76 = t71 * t75;
  t77 = t32 * t35;
  t80 = 0.1e1 / t8 / t72 / rho[0];
  t83 = 0.2e1 * t71 * t80 + 0.1e1;
  t84 = sqrt(t83);
  t85 = 0.1e1 / t84;
  t86 = t77 * t85;
  t89 = -0.24e2 * t31 * t58 * t32 * t36 - 0.96e2 * t76 * t86;
  t91 = t29 * t65 * t89;
  t94 = -0.16e2 / 0.27e2 * t60 * t44 - t24 * t91 / 0.9e1;
  t99 = my_piecewise3(t3, 0, -t7 * t52 * t47 / 0.8e1 - 0.3e1 / 0.8e1 * t7 * t8 * t94);
  if(vrho != NULL && (p->info->flags & XC_FLAGS_HAVE_VXC))
    vrho[0] = 0.2e1 * rho[0] * t99 + 0.2e1 * t51;

  t104 = t11 * t11;
  t105 = 0.1e1 / t104;
  t108 = params->beta1 * t12 / 0.4e1 - t9 * t105 / 0.16e2;
  t109 = t108 * sigma[0];
  t110 = t109 * t23;
  t113 = t15 * t18;
  t117 = t32 * t36;
  t120 = t15 * t36;
  t121 = t120 * t108;
  t125 = sigma[0] * t17 * t80;
  t128 = 0.9e1 * t23 * t117 + 0.18e2 * t34 * t121 + 0.36e2 * t125 * t86;
  t130 = t29 * t65 * t128;
  t133 = 0.2e1 / 0.9e1 * t110 * t44 + 0.2e1 / 0.9e1 * t113 * t22 * t44 - t24 * t130 / 0.9e1;
  t137 = my_piecewise3(t3, 0, -0.3e1 / 0.8e1 * t7 * t8 * t133);
  if(vrho != NULL && (p->info->flags & XC_FLAGS_HAVE_VXC))
    vsigma[0] = 0.2e1 * rho[0] * t137;

#ifndef XC_DONT_COMPILE_FXC

  if(order < 2) return;


  t149 = 0.1e1 / t20 / t72;
  t156 = t40 * t40;
  t158 = 0.1e1 / t41 / t156;
  t159 = t30 * t158;
  t160 = t89 * t89;
  t175 = t70 * sigma[0];
  t176 = t72 * t72;
  t177 = t176 * t19;
  t181 = t32 / t83;
  t184 = t70 * t70;
  t192 = t77 / t84 / t83;
  t205 = my_piecewise3(t3, 0, t7 / t20 / rho[0] * t47 / 0.12e2 - t7 * t52 * t94 / 0.4e1 - 0.3e1 / 0.8e1 * t7 * t8 * (0.176e3 / 0.81e2 * t16 * t18 * t149 * t44 + 0.16e2 / 0.27e2 * t60 * t91 + t24 * t29 * t159 * t160 / 0.6e1 - t24 * t29 * t65 * (0.88e2 * t31 * t149 * t32 * t36 + 0.864e3 * t71 / t8 / t72 / t56 * t86 + 0.512e3 * t175 / t177 * t181 - 0.512e3 * t184 * t18 / t20 / t176 / t72 * t192) / 0.9e1));
  if(v2rho2 != NULL && (p->info->flags & XC_FLAGS_HAVE_FXC))
    v2rho2[0] = 0.2e1 * rho[0] * t205 + 0.4e1 * t99;

  t220 = t113 * t22 * t25;
  t221 = t28 * t30;
  t248 = t15 * t35 * t108 * t85;
  t273 = my_piecewise3(t3, 0, -t7 * t52 * t133 / 0.8e1 - 0.3e1 / 0.8e1 * t7 * t8 * (-0.16e2 / 0.27e2 * t109 * t59 * t44 - t110 * t91 / 0.9e1 - 0.16e2 / 0.27e2 * t113 * t58 * t44 - t220 * t221 * t64 * t89 / 0.9e1 + 0.8e1 / 0.27e2 * t60 * t130 + t16 * t23 * t25 * t221 * t158 * t128 * t89 / 0.6e1 - t24 * t29 * t65 * (-0.24e2 * t59 * t117 - 0.288e3 * t17 * t75 * t32 * t35 * sigma[0] * t85 - 0.48e2 * t31 * t58 * t121 - 0.192e3 * t76 * t248 - 0.192e3 * t70 / t176 / rho[0] * t181 + 0.192e3 * t175 * t18 / t20 / t176 / t56 * t192) / 0.9e1));
  if(v2rho2 != NULL && (p->info->flags & XC_FLAGS_HAVE_FXC))
    v2rhosigma[0] = 0.2e1 * rho[0] * t273 + 0.2e1 * t137;

  t282 = -params->beta1 * t105 / 0.8e1 + t9 / t104 / t11 / 0.32e2;
  t297 = t128 * t128;
  t307 = t108 * t108;
  t336 = my_piecewise3(t3, 0, -0.3e1 / 0.8e1 * t7 * t8 * (0.2e1 / 0.9e1 * t282 * sigma[0] * t23 * t44 + 0.4e1 / 0.9e1 * t108 * t18 * t22 * t44 - 0.2e1 / 0.9e1 * t110 * t130 - 0.2e1 / 0.9e1 * t220 * t221 * t64 * t128 + t24 * t29 * t159 * t297 / 0.6e1 - t24 * t29 * t65 * (0.36e2 * t23 * t121 + 0.72e2 * t17 * t80 * t86 + 0.18e2 * t31 * t22 * t307 * t36 + 0.144e3 * t125 * t248 + 0.18e2 * t34 * t120 * t282 + 0.72e2 * sigma[0] / t176 * t181 - 0.72e2 * t70 * t18 / t20 / t177 * t192) / 0.9e1));
  if(v2rho2 != NULL && (p->info->flags & XC_FLAGS_HAVE_FXC))
    v2sigma2[0] = 0.2e1 * rho[0] * t336;

#ifndef XC_DONT_COMPILE_KXC

  if(order < 3) return;


#endif

#endif

#endif


}


static inline void
func_pol(const xc_func_type *p, int order, const double *rho, const double *sigma , double *zk GGA_OUT_PARAMS_NO_EXC(XC_COMMA double *, ))
{

#ifndef XC_DONT_COMPILE_EXC
  double t1, t2, t3, t4, t6, t7, t8, t9;
  double t10, t11, t12, t13, t14, t15, t16, t17;
  double t18, t19, t21, t22, t23, t24, t25, t27;
  double t29, t31, t32, t33, t34, t35, t36, t37;
  double t38, t39, t42, t43, t44, t46, t49, t50;
  double t54, t55, t56, t57, t58, t59, t60, t61;
  double t63, t64, t65, t66, t67, t69, t71, t72;
  double t73, t74, t75, t78, t79, t80, t82, t85;
  double t86, t90;

#ifndef XC_DONT_COMPILE_VXC
  double t91, t96, t97, t100, t102, t103, t104, t105;
  double t106, t107, t109, t110, t111, t114, t116, t120;
  double t121, t122, t124, t125, t128, t129, t132, t133;
  double t134, t137, t139, t140, t141, t142, t145, t147;
  double t150, t151, t156, t157, t160, t162, t163, t164;
  double t165, t166, t171, t174, t175, t180, t181, t186;
  double t187, t189, t190, t191, t194, t196, t200, t201;
  double t203, t204, t207, t208, t211, t212, t213, t216;
  double t218, t219, t220, t221, t224, t226, t229, t230;
  double t235, t239, t240, t242, t243, t247, t248, t249;
  double t255, t256, t259, t262, t264, t267, t268, t272;
  double t274, t275, t277, t278, t282, t283, t284, t290;
  double t291, t294, t297, t299, t302, t303, t307;

#ifndef XC_DONT_COMPILE_FXC
  double t312, t318, t321, t324, t327, t329, t331, t340;
  double t341, t350, t355, t358, t360, t361, t375, t376;
  double t377, t381, t384, t391, t405, t409, t411, t414;
  double t416, t418, t421, t427, t438, t451, t454, t464;
  double t472, t480, t487, t499, t507, t523, t528, t531;
  double t533, t534, t548, t549, t550, t554, t557, t564;
  double t578, t586, t594, t622, t647, t651, t657, t664;
  double t676, t704, t729, t736, t749, t761, t790, t796;
  double t809, t821, t850;
#endif

#endif

#endif


  gga_x_ft97_params *params;

  assert(p->params != NULL);
  params = (gga_x_ft97_params * )(p->params);

  t1 = 0.101e1 * p->threshold_dens;
  t2 = rho[0] <= t1;
  t3 = M_CBRT3;
  t4 = M_CBRTPI;
  t6 = t3 / t4;
  t7 = M_CBRT2;
  t8 = t6 * t7;
  t9 = rho[0] + rho[1];
  t10 = POW_1_3(t9);
  t11 = t10 * t10;
  t12 = 0.1e1 / t11;
  t13 = rho[0] * t12;
  t14 = 0.1e1 / t9;
  t15 = rho[0] * t14;
  t16 = POW_1_3(t15);
  t17 = params->beta1 * sigma[0];
  t18 = params->beta2 + sigma[0];
  t19 = 0.1e1 / t18;
  t21 = t17 * t19 + params->beta0;
  t22 = t21 * sigma[0];
  t23 = rho[0] * rho[0];
  t24 = POW_1_3(rho[0]);
  t25 = t24 * t24;
  t27 = 0.1e1 / t25 / t23;
  t29 = t3 * t3;
  t31 = POW_1_3(0.1e1 / M_PI);
  t32 = 0.1e1 / t31;
  t33 = t29 * t32;
  t34 = M_CBRT4;
  t35 = sigma[0] * t27;
  t36 = t21 * t21;
  t37 = log(t35 + sqrt(t35 * t35 + 0.1e1));
  t38 = t37 * t37;
  t39 = t36 * t38;
  t42 = 0.9e1 * t35 * t39 + 0.1e1;
  t43 = sqrt(t42);
  t44 = 0.1e1 / t43;
  t46 = t33 * t34 * t44;
  t49 = 0.1e1 + 0.2e1 / 0.9e1 * t22 * t27 * t46;
  t50 = t16 * t49;
  t54 = my_piecewise3(t2, 0, -0.3e1 / 0.4e1 * t8 * t13 * t50);
  t55 = rho[1] <= t1;
  t56 = rho[1] * t12;
  t57 = rho[1] * t14;
  t58 = POW_1_3(t57);
  t59 = params->beta1 * sigma[2];
  t60 = params->beta2 + sigma[2];
  t61 = 0.1e1 / t60;
  t63 = t59 * t61 + params->beta0;
  t64 = t63 * sigma[2];
  t65 = rho[1] * rho[1];
  t66 = POW_1_3(rho[1]);
  t67 = t66 * t66;
  t69 = 0.1e1 / t67 / t65;
  t71 = sigma[2] * t69;
  t72 = t63 * t63;
  t73 = log(t71 + sqrt(t71 * t71 + 0.1e1));
  t74 = t73 * t73;
  t75 = t72 * t74;
  t78 = 0.9e1 * t71 * t75 + 0.1e1;
  t79 = sqrt(t78);
  t80 = 0.1e1 / t79;
  t82 = t33 * t34 * t80;
  t85 = 0.1e1 + 0.2e1 / 0.9e1 * t64 * t69 * t82;
  t86 = t58 * t85;
  t90 = my_piecewise3(t55, 0, -0.3e1 / 0.4e1 * t8 * t56 * t86);
  if(zk != NULL && (p->info->flags & XC_FLAGS_HAVE_EXC))
    zk[0] = t54 + t90;

#ifndef XC_DONT_COMPILE_VXC

  if(order < 1) return;


  t91 = t12 * t16;
  t96 = 0.1e1 / t11 / t9;
  t97 = rho[0] * t96;
  t100 = t8 * t97 * t50 / 0.2e1;
  t102 = t6 * t7 * rho[0];
  t103 = t16 * t16;
  t104 = 0.1e1 / t103;
  t105 = t12 * t104;
  t106 = t9 * t9;
  t107 = 0.1e1 / t106;
  t109 = -rho[0] * t107 + t14;
  t110 = t49 * t109;
  t111 = t105 * t110;
  t114 = t23 * rho[0];
  t116 = 0.1e1 / t25 / t114;
  t120 = t27 * t29;
  t121 = t22 * t120;
  t122 = t32 * t34;
  t124 = 0.1e1 / t43 / t42;
  t125 = sigma[0] * t116;
  t128 = sigma[0] * sigma[0];
  t129 = t23 * t23;
  t132 = 0.1e1 / t24 / t129 / t23;
  t133 = t128 * t132;
  t134 = t36 * t37;
  t137 = 0.1e1 / t24 / t129 / rho[0];
  t139 = t128 * t137 + 0.1e1;
  t140 = sqrt(t139);
  t141 = 0.1e1 / t140;
  t142 = t134 * t141;
  t145 = -0.24e2 * t125 * t39 - 0.48e2 * t133 * t142;
  t147 = t122 * t124 * t145;
  t150 = -0.16e2 / 0.27e2 * t22 * t116 * t46 - t121 * t147 / 0.9e1;
  t151 = t16 * t150;
  t156 = my_piecewise3(t2, 0, -0.3e1 / 0.4e1 * t8 * t91 * t49 + t100 - t102 * t111 / 0.4e1 - 0.3e1 / 0.4e1 * t8 * t13 * t151);
  t157 = rho[1] * t96;
  t160 = t8 * t157 * t86 / 0.2e1;
  t162 = 0.1e1 / t11 / t106;
  t163 = t65 * t162;
  t164 = t58 * t58;
  t165 = 0.1e1 / t164;
  t166 = t165 * t85;
  t171 = my_piecewise3(t55, 0, t160 + t8 * t163 * t166 / 0.4e1);
  if(vrho != NULL && (p->info->flags & XC_FLAGS_HAVE_VXC))
    vrho[0] = t54 + t90 + t9 * (t156 + t171);

  t174 = t23 * t162;
  t175 = t104 * t49;
  t180 = my_piecewise3(t2, 0, t100 + t8 * t174 * t175 / 0.4e1);
  t181 = t12 * t58;
  t186 = t6 * t7 * rho[1];
  t187 = t12 * t165;
  t189 = -rho[1] * t107 + t14;
  t190 = t85 * t189;
  t191 = t187 * t190;
  t194 = t65 * rho[1];
  t196 = 0.1e1 / t67 / t194;
  t200 = t69 * t29;
  t201 = t64 * t200;
  t203 = 0.1e1 / t79 / t78;
  t204 = sigma[2] * t196;
  t207 = sigma[2] * sigma[2];
  t208 = t65 * t65;
  t211 = 0.1e1 / t66 / t208 / t65;
  t212 = t207 * t211;
  t213 = t72 * t73;
  t216 = 0.1e1 / t66 / t208 / rho[1];
  t218 = t207 * t216 + 0.1e1;
  t219 = sqrt(t218);
  t220 = 0.1e1 / t219;
  t221 = t213 * t220;
  t224 = -0.24e2 * t204 * t75 - 0.48e2 * t212 * t221;
  t226 = t122 * t203 * t224;
  t229 = -0.16e2 / 0.27e2 * t64 * t196 * t82 - t201 * t226 / 0.9e1;
  t230 = t58 * t229;
  t235 = my_piecewise3(t55, 0, -0.3e1 / 0.4e1 * t8 * t181 * t85 + t160 - t186 * t191 / 0.4e1 - 0.3e1 / 0.4e1 * t8 * t56 * t230);
  if(vrho != NULL && (p->info->flags & XC_FLAGS_HAVE_VXC))
    vrho[1] = t54 + t90 + t9 * (t180 + t235);

  t239 = t18 * t18;
  t240 = 0.1e1 / t239;
  t242 = -t17 * t240 + params->beta1 * t19;
  t243 = t242 * sigma[0];
  t247 = t21 * t27;
  t248 = t247 * t29;
  t249 = t122 * t44;
  t255 = t21 * t38;
  t256 = t255 * t242;
  t259 = sigma[0] * t137;
  t262 = 0.9e1 * t27 * t36 * t38 + 0.18e2 * t259 * t142 + 0.18e2 * t35 * t256;
  t264 = t122 * t124 * t262;
  t267 = 0.2e1 / 0.9e1 * t243 * t27 * t46 + 0.2e1 / 0.9e1 * t248 * t249 - t121 * t264 / 0.9e1;
  t268 = t16 * t267;
  t272 = my_piecewise3(t2, 0, -0.3e1 / 0.4e1 * t8 * t13 * t268);
  if(vrho != NULL && (p->info->flags & XC_FLAGS_HAVE_VXC))
    vsigma[0] = t9 * t272;

  if(vrho != NULL && (p->info->flags & XC_FLAGS_HAVE_VXC))
    vsigma[1] = 0.0e0;

  t274 = t60 * t60;
  t275 = 0.1e1 / t274;
  t277 = -t59 * t275 + params->beta1 * t61;
  t278 = t277 * sigma[2];
  t282 = t63 * t69;
  t283 = t282 * t29;
  t284 = t122 * t80;
  t290 = t63 * t74;
  t291 = t290 * t277;
  t294 = sigma[2] * t216;
  t297 = 0.9e1 * t69 * t72 * t74 + 0.18e2 * t294 * t221 + 0.18e2 * t71 * t291;
  t299 = t122 * t203 * t297;
  t302 = 0.2e1 / 0.9e1 * t278 * t69 * t82 + 0.2e1 / 0.9e1 * t283 * t284 - t201 * t299 / 0.9e1;
  t303 = t58 * t302;
  t307 = my_piecewise3(t55, 0, -0.3e1 / 0.4e1 * t8 * t56 * t303);
  if(vrho != NULL && (p->info->flags & XC_FLAGS_HAVE_VXC))
    vsigma[2] = t9 * t307;

#ifndef XC_DONT_COMPILE_FXC

  if(order < 2) return;


  t312 = t8 * t96 * t16 * t49;
  t318 = rho[0] * t162;
  t321 = 0.5e1 / 0.6e1 * t8 * t318 * t50;
  t324 = t102 * t96 * t104 * t110;
  t327 = t8 * t97 * t151;
  t329 = 0.1e1 / t103 / t15;
  t331 = t109 * t109;
  t340 = t106 * t9;
  t341 = 0.1e1 / t340;
  t350 = 0.1e1 / t25 / t129;
  t355 = t22 * t116 * t29;
  t358 = t42 * t42;
  t360 = 0.1e1 / t43 / t358;
  t361 = t145 * t145;
  t375 = t128 * sigma[0];
  t376 = t129 * t129;
  t377 = t376 * t23;
  t381 = t36 / t139;
  t384 = t128 * t128;
  t391 = t134 / t140 / t139;
  t405 = my_piecewise3(t2, 0, t312 - t8 * t111 / 0.2e1 - 0.3e1 / 0.2e1 * t8 * t91 * t150 - t321 + t324 / 0.3e1 + t327 + t102 * t12 * t329 * t49 * t331 / 0.6e1 - t102 * t105 * t150 * t109 / 0.2e1 - t102 * t105 * t49 * (0.2e1 * rho[0] * t341 - 0.2e1 * t107) / 0.4e1 - 0.3e1 / 0.4e1 * t8 * t13 * t16 * (0.176e3 / 0.81e2 * t22 * t350 * t46 + 0.16e2 / 0.27e2 * t355 * t147 + t121 * t122 * t360 * t361 / 0.6e1 - t121 * t122 * t124 * (0.88e2 * sigma[0] * t350 * t39 + 0.432e3 * t128 / t24 / t129 / t114 * t142 + 0.128e3 * t375 / t377 * t381 - 0.128e3 * t384 / t25 / t376 / t129 * t391) / 0.9e1));
  t409 = 0.5e1 / 0.6e1 * t8 * rho[1] * t162 * t86;
  t411 = 0.1e1 / t11 / t340;
  t414 = t8 * t65 * t411 * t166;
  t416 = t106 * t106;
  t418 = 0.1e1 / t11 / t416;
  t421 = 0.1e1 / t164 / t57;
  t427 = my_piecewise3(t55, 0, -t409 - 0.5e1 / 0.6e1 * t414 + t8 * t194 * t418 * t421 * t85 / 0.6e1);
  if(v2rho2 != NULL && (p->info->flags & XC_FLAGS_HAVE_FXC))
    v2rho2[0] = 0.2e1 * t156 + 0.2e1 * t171 + t9 * (t405 + t427);

  t438 = t8 * t23 * t411 * t175;
  t451 = my_piecewise3(t2, 0, t312 / 0.2e1 - t321 + t324 / 0.6e1 + t327 / 0.2e1 + t8 * t318 * t175 / 0.2e1 - 0.2e1 / 0.3e1 * t438 - t6 * t7 * t23 * t162 * t329 * t110 / 0.6e1 + t8 * t174 * t104 * t150 / 0.4e1);
  t454 = t8 * t96 * t58 * t85;
  t464 = t186 * t96 * t165 * t190;
  t472 = rho[1] * t341;
  t480 = t8 * t157 * t230;
  t487 = my_piecewise3(t55, 0, t454 / 0.2e1 + t8 * t162 * t165 * t85 * rho[1] / 0.4e1 - t409 - t414 / 0.6e1 + t464 / 0.6e1 - t6 * t7 * t65 * t162 * t421 * t190 / 0.6e1 - t186 * t187 * t85 * (-t107 + 0.2e1 * t472) / 0.4e1 + t480 / 0.2e1 + t8 * t163 * t165 * t229 / 0.4e1);
  if(v2rho2 != NULL && (p->info->flags & XC_FLAGS_HAVE_FXC))
    v2rho2[1] = t156 + t171 + t180 + t235 + t9 * (t451 + t487);

  t499 = my_piecewise3(t2, 0, -t321 - 0.5e1 / 0.6e1 * t438 + t8 * t114 * t418 * t329 * t49 / 0.6e1);
  t507 = t189 * t189;
  t523 = 0.1e1 / t67 / t208;
  t528 = t64 * t196 * t29;
  t531 = t78 * t78;
  t533 = 0.1e1 / t79 / t531;
  t534 = t224 * t224;
  t548 = t207 * sigma[2];
  t549 = t208 * t208;
  t550 = t549 * t65;
  t554 = t72 / t218;
  t557 = t207 * t207;
  t564 = t213 / t219 / t218;
  t578 = my_piecewise3(t55, 0, t454 - t8 * t191 / 0.2e1 - 0.3e1 / 0.2e1 * t8 * t181 * t229 - t409 + t464 / 0.3e1 + t480 + t186 * t12 * t421 * t85 * t507 / 0.6e1 - t186 * t187 * t229 * t189 / 0.2e1 - t186 * t187 * t85 * (-0.2e1 * t107 + 0.2e1 * t472) / 0.4e1 - 0.3e1 / 0.4e1 * t8 * t56 * t58 * (0.176e3 / 0.81e2 * t64 * t523 * t82 + 0.16e2 / 0.27e2 * t528 * t226 + t201 * t122 * t533 * t534 / 0.6e1 - t201 * t122 * t203 * (0.88e2 * sigma[2] * t523 * t75 + 0.432e3 * t207 / t66 / t208 / t194 * t221 + 0.128e3 * t548 / t550 * t554 - 0.128e3 * t557 / t67 / t549 / t208 * t564) / 0.9e1));
  if(v2rho2 != NULL && (p->info->flags & XC_FLAGS_HAVE_FXC))
    v2rho2[2] = 0.2e1 * t180 + 0.2e1 * t235 + t9 * (t499 + t578);

  t586 = t8 * t97 * t268 / 0.2e1;
  t594 = t243 * t120;
  t622 = t37 * t242 * t141;
  t647 = my_piecewise3(t2, 0, -0.3e1 / 0.4e1 * t8 * t91 * t267 + t586 - t102 * t105 * t267 * t109 / 0.4e1 - 0.3e1 / 0.4e1 * t8 * t13 * t16 * (-0.16e2 / 0.27e2 * t243 * t116 * t46 - t594 * t147 / 0.9e1 - 0.16e2 / 0.27e2 * t21 * t116 * t29 * t249 - t248 * t147 / 0.9e1 + 0.8e1 / 0.27e2 * t355 * t264 + t121 * t122 * t360 * t262 * t145 / 0.6e1 - t121 * t122 * t124 * (-0.24e2 * t116 * t36 * t38 - 0.144e3 * t132 * t36 * t37 * sigma[0] * t141 - 0.48e2 * t125 * t256 - 0.96e2 * t133 * t21 * t622 - 0.48e2 * t128 / t376 / rho[0] * t381 + 0.48e2 * t375 / t25 / t376 / t114 * t391) / 0.9e1));
  if(v2rho2 != NULL && (p->info->flags & XC_FLAGS_HAVE_FXC))
    v2rhosigma[0] = t9 * t647 + t272;

  if(v2rho2 != NULL && (p->info->flags & XC_FLAGS_HAVE_FXC))
    v2rhosigma[1] = 0.0e0;

  t651 = t8 * t157 * t303 / 0.2e1;
  t657 = my_piecewise3(t55, 0, t651 + t8 * t163 * t165 * t302 / 0.4e1);
  if(v2rho2 != NULL && (p->info->flags & XC_FLAGS_HAVE_FXC))
    v2rhosigma[2] = t9 * t657 + t307;

  t664 = my_piecewise3(t2, 0, t586 + t8 * t174 * t104 * t267 / 0.4e1);
  if(v2rho2 != NULL && (p->info->flags & XC_FLAGS_HAVE_FXC))
    v2rhosigma[3] = t9 * t664 + t272;

  if(v2rho2 != NULL && (p->info->flags & XC_FLAGS_HAVE_FXC))
    v2rhosigma[4] = 0.0e0;

  t676 = t278 * t200;
  t704 = t73 * t277 * t220;
  t729 = my_piecewise3(t55, 0, -0.3e1 / 0.4e1 * t8 * t181 * t302 + t651 - t186 * t187 * t302 * t189 / 0.4e1 - 0.3e1 / 0.4e1 * t8 * t56 * t58 * (-0.16e2 / 0.27e2 * t278 * t196 * t82 - t676 * t226 / 0.9e1 - 0.16e2 / 0.27e2 * t63 * t196 * t29 * t284 - t283 * t226 / 0.9e1 + 0.8e1 / 0.27e2 * t528 * t299 + t201 * t122 * t533 * t297 * t224 / 0.6e1 - t201 * t122 * t203 * (-0.24e2 * t196 * t72 * t74 - 0.144e3 * t211 * t72 * t73 * sigma[2] * t220 - 0.48e2 * t204 * t291 - 0.96e2 * t212 * t63 * t704 - 0.48e2 * t207 / t549 / rho[1] * t554 + 0.48e2 * t548 / t67 / t549 / t194 * t564) / 0.9e1));
  if(v2rho2 != NULL && (p->info->flags & XC_FLAGS_HAVE_FXC))
    v2rhosigma[5] = t9 * t729 + t307;

  t736 = -0.2e1 * params->beta1 * t240 + 0.2e1 * t17 / t239 / t18;
  t749 = t262 * t262;
  t761 = t242 * t242;
  t790 = my_piecewise3(t2, 0, -0.3e1 / 0.4e1 * t8 * t13 * t16 * (0.2e1 / 0.9e1 * t736 * sigma[0] * t27 * t46 + 0.4e1 / 0.9e1 * t242 * t27 * t29 * t249 - 0.2e1 / 0.9e1 * t594 * t264 - 0.2e1 / 0.9e1 * t248 * t264 + t121 * t122 * t360 * t749 / 0.6e1 - t121 * t122 * t124 * (0.36e2 * t247 * t38 * t242 + 0.36e2 * t137 * t36 * t37 * t141 + 0.18e2 * t35 * t761 * t38 + 0.72e2 * t259 * t21 * t622 + 0.18e2 * t35 * t255 * t736 + 0.18e2 * sigma[0] / t376 * t381 - 0.18e2 * t128 / t25 / t377 * t391) / 0.9e1));
  if(v2rho2 != NULL && (p->info->flags & XC_FLAGS_HAVE_FXC))
    v2sigma2[0] = t9 * t790;

  if(v2rho2 != NULL && (p->info->flags & XC_FLAGS_HAVE_FXC))
    v2sigma2[1] = 0.0e0;

  if(v2rho2 != NULL && (p->info->flags & XC_FLAGS_HAVE_FXC))
    v2sigma2[2] = 0.0e0;

  if(v2rho2 != NULL && (p->info->flags & XC_FLAGS_HAVE_FXC))
    v2sigma2[3] = 0.0e0;

  if(v2rho2 != NULL && (p->info->flags & XC_FLAGS_HAVE_FXC))
    v2sigma2[4] = 0.0e0;

  t796 = -0.2e1 * params->beta1 * t275 + 0.2e1 * t59 / t274 / t60;
  t809 = t297 * t297;
  t821 = t277 * t277;
  t850 = my_piecewise3(t55, 0, -0.3e1 / 0.4e1 * t8 * t56 * t58 * (0.2e1 / 0.9e1 * t796 * sigma[2] * t69 * t82 + 0.4e1 / 0.9e1 * t277 * t69 * t29 * t284 - 0.2e1 / 0.9e1 * t676 * t299 - 0.2e1 / 0.9e1 * t283 * t299 + t201 * t122 * t533 * t809 / 0.6e1 - t201 * t122 * t203 * (0.36e2 * t282 * t74 * t277 + 0.36e2 * t216 * t72 * t73 * t220 + 0.18e2 * t71 * t821 * t74 + 0.72e2 * t294 * t63 * t704 + 0.18e2 * t71 * t290 * t796 + 0.18e2 * sigma[2] / t549 * t554 - 0.18e2 * t207 / t67 / t550 * t564) / 0.9e1));
  if(v2rho2 != NULL && (p->info->flags & XC_FLAGS_HAVE_FXC))
    v2sigma2[5] = t9 * t850;

#ifndef XC_DONT_COMPILE_KXC

  if(order < 3) return;


#endif

#endif

#endif


}

